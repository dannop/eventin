<!--Como os countdowns são iguais, foi copiado do countdown-->
<!--do workshops index e seu css está na respectiva página-->


<% if @event.begin_day > Time.now %>
    <div id="tempo-workshop">	
        <div class="corpo-relogio-workshop">
                        
            <h1>Em:</h1>
            <ul>		
                			
                <!-- dias -->	
                <li class="li-countdown-workshop">		
                	<span id="dias-workshop">		
                	</span>
                	<p>Dias</p>
                </li>
                
                <!-- horas -->
                <li class="li-countdown-workshop">
                	<span id="horas-workshop">		
                	</span>
                	<p>Horas</p>
                </li>
                
                <!-- minutos -->
                <li class="li-countdown-workshop">
                	<span id="minutos-workshop">			
                	</span>
                	<p>Minutos</p>
                </li>
                
                
                <!-- segundos -->
                <li class="li-countdown-workshop">
                	<span id="segundos-workshop">		
                	</span>
                	<p>Segundos</p>
                </li>
                
            </ul>
                		<p>será liberado o acesso ao login</p>
        </div>
	</div>   
	
    <script>
        // definir o cálculo do tempo em dias, horas, minutos e segundos 
        const second_w = 1000,
            minute_w = second_w * 60,
            hour_w = minute_w * 60,
            day_w = hour_w * 24;
                            
            // definir a data para a contagem regressiva 
            let contagemTempo_w = new Date('<%= @event.activity_begin_day.month %> <%= @event.activity_begin_day.day %>, <%= @event.activity_begin_day.year %> <%= @event.activity_begin_day.hour %>:<%= @event.activity_begin_day.min %>:<%= @event.activity_begin_day.sec %>').getTime(),
                        
            // atualizar a contagem regressiva a cada 1 segundo  
            x_w = setInterval(function() {
                        
            // encontrar a data de agora
            let hoje_w = new Date().getTime(),
                        
            // encontrar a distância entre a data de agora e a data da contagem regressiva    
            distancia_w = contagemTempo_w - hoje_w;
                        
            // aparecer no ecrã a contagem em dias, horas, minutos e segundos e corresponder a mesma ao cálculo do tempo definido acima      
            document.getElementById('dias-workshop').innerHTML = Math.floor(distancia_w / (day_w)),
            document.getElementById('horas-workshop').innerHTML = Math.floor((distancia_w % (day_w)) / (hour_w)),
            document.getElementById('minutos-workshop').innerHTML = Math.floor((distancia_w % (hour_w)) / (minute_w)),
            document.getElementById('segundos-workshop').innerHTML = Math.floor((distancia_w % (minute_w)) / second_w);
                              
            // quando a contagem terminar, desaparecer a data e aparecer uma mensagem 
            if (distancia_w < 0) {
                clearInterval(x_w);
                document.getElementById("tempo-workshop").innerHTML = "FIM"; 
                              }
            }, second_w); 
    </script>
<% end %>
